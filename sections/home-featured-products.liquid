{% comment %}
  Home Featured Products Section
  Converted from: src/pages/home/FeaturedProducts.tsx
{% endcomment %}

<section class="home-featured-products py-32 md:py-48 bg-orea-cream">
  <div class="max-w-[1600px] mx-auto px-6 md:px-16 lg:px-24">
    
    <!-- Section Header -->
    <header class="text-center mb-20 space-y-6">
      <h2 class="text-3xl md:text-4xl font-serif text-orea-dark tracking-wide">
        {{ section.settings.heading | default: 'Featured Collection' }}
      </h2>
      {% if section.settings.subheading != blank %}
        <p class="text-lg text-orea-brown font-light max-w-2xl mx-auto">
          {{ section.settings.subheading }}
        </p>
      {% endif %}
      <div class="w-16 h-[1px] bg-orea-gold mx-auto"></div>
    </header>

    <!-- Products Grid -->
    {% if section.settings.collection != blank %}
      {% assign featured_collection = collections[section.settings.collection] %}
      
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8 md:gap-12">
        {% for product in featured_collection.products limit: section.settings.products_to_show %}
          <article class="product-card">
            <a href="{{ product.url }}" class="block">
              <!-- Product Image -->
              <div class="product-card__image-wrapper">
                {% if product.featured_image %}
                  <img 
                    src="{{ product.featured_image | img_url: '600x' }}" 
                    alt="{{ product.featured_image.alt | escape }}"
                    class="product-card__image"
                    loading="lazy"
                  >
                {% else %}
                  {{ 'product-1' | placeholder_svg_tag: 'product-card__image' }}
                {% endif %}

                <!-- Badges -->
                {% if product.available == false %}
                  <span class="product-card__badge">Sold Out</span>
                {% elsif product.tags contains 'new' %}
                  <span class="product-card__badge">New</span>
                {% elsif product.tags contains 'bestseller' %}
                  <span class="product-card__badge">Best Seller</span>
                {% endif %}
              </div>

              <!-- Product Info -->
              <div class="product-card__info">
                {% if product.metafields.custom.category %}
                  <p class="product-card__category">{{ product.metafields.custom.category }}</p>
                {% elsif product.type != blank %}
                  <p class="product-card__category">{{ product.type }}</p>
                {% endif %}

                <h3 class="product-card__title">{{ product.title }}</h3>
                
                <p class="product-card__price">
                  {% if product.price_varies %}
                    From {{ product.price_min | money }}
                  {% else %}
                    {{ product.price | money }}
                  {% endif %}
                </p>
              </div>
            </a>
          </article>
        {% endfor %}
      </div>

      <!-- View All Link -->
      {% if section.settings.show_view_all %}
        <div class="text-center mt-16">
          <a 
            href="{{ featured_collection.url }}" 
            class="btn btn-primary inline-flex items-center gap-4"
          >
            View All
            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
            </svg>
          </a>
        </div>
      {% endif %}

    {% else %}
      <!-- Placeholder when no collection selected -->
      <div class="text-center py-20">
        <p class="text-orea-brown">Select a collection in theme settings to display products</p>
      </div>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Featured Products",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Featured Collection"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 2,
      "max": 12,
      "step": 1,
      "label": "Products to show",
      "default": 4
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "label": "Show 'View All' button",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "Featured Products"
    }
  ]
}
{% endschema %}

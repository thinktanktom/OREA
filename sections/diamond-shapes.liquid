{% comment %}
  ORÉA Diamond Shapes Section
{% endcomment %}

<section class="py-32 relative" id="diamond-shapes">
  <div class="max-w-4xl mx-auto flex flex-col items-center mb-20 text-center space-y-8 px-6">
    <h2 class="text-4xl md:text-6xl font-light text-stone-900 leading-tight font-serif">{{ section.settings.heading }}</h2>
    <p class="text-stone-500 font-light text-lg max-w-xl leading-relaxed">
      {{ section.settings.description | newline_to_br }}
    </p>
  </div>

  <div class="relative group">
    <div 
      id="shapes-scroll-container"
      class="flex overflow-x-auto snap-x snap-mandatory no-scrollbar pb-12 gap-px bg-stone-100 border-y border-stone-100"
    >
      {%- assign shapes = 'Round,Oval,Pear,Marquise,Princess,Emerald,Radiant,Asscher,Cushion,Heart' | split: ',' -%}
      {%- for shape in shapes -%}
        <div 
          data-shape-card="{{ shape }}"
          class="shape-card flex-shrink-0 w-[70vw] md:w-[35vw] lg:w-[20vw] snap-start bg-white transition-all duration-700 cursor-pointer overflow-hidden hover:bg-[#FBFBFA]"
        >
          <div class="aspect-[4/5] relative flex flex-col items-center justify-center p-6 bg-white transition-colors duration-500 overflow-hidden">
            <div class="w-full h-full flex items-center justify-center opacity-20 group-hover:opacity-40 transition-opacity duration-700">
              {% render 'diamond-shape-icon', shape: shape %}
            </div>
            
            <div class="absolute bottom-6 left-0 right-0 flex flex-col items-center space-y-1 z-20">
              <h3 class="text-xs uppercase tracking-[0.4em] font-bold text-stone-900">{{ shape }}</h3>
              <div class="w-0 h-[1px] bg-stone-900 transition-all duration-700 group-hover:w-12"></div>
            </div>
          </div>
        </div>
      {%- endfor -%}
    </div>
  </div>

  <div class="text-center mt-12 space-y-6 px-6">
    <p class="text-[10px] uppercase tracking-[0.4em] text-stone-400 font-medium">
      {{ section.settings.shapes_note }}
    </p>
    <p class="text-stone-500 font-light text-base max-w-lg mx-auto leading-relaxed">
      {{ section.settings.shapes_tagline }}
    </p>
  </div>

  <!-- Shape Detail Modal -->
  <div id="shape-modal" class="fixed inset-0 z-[100] hidden items-center justify-center p-6 sm:p-12">
    <div id="shape-modal-overlay" class="absolute inset-0 bg-stone-950/20 backdrop-blur-sm transition-opacity"></div>
    <div class="relative bg-white w-full max-w-lg border border-stone-100 shadow-2xl overflow-hidden">
      <button id="shape-modal-close" class="absolute top-6 right-6 text-stone-300 hover:text-stone-900 transition-colors z-20" aria-label="Close">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M1 1L13 13M1 13L13 1" />
        </svg>
      </button>
      <div class="p-10 sm:p-16 flex flex-col items-center text-center space-y-10">
        <div class="space-y-4 relative z-10">
          <span class="text-[9px] uppercase tracking-[0.5em] font-bold text-stone-300">Shape Character</span>
          <h4 id="shape-modal-name" class="text-3xl font-light text-stone-900 font-serif"></h4>
        </div>
        <div class="space-y-6 relative z-10">
          <p id="shape-modal-description" class="text-stone-600 font-light text-base leading-relaxed"></p>
          <div class="pt-8 border-t border-stone-100 w-full">
            <div class="space-y-2">
              <span class="text-[8px] uppercase tracking-[0.4em] font-bold text-stone-400">Technical Standards</span>
              <p id="shape-modal-technical" class="text-[11px] text-stone-900 font-medium tracking-[0.2em] uppercase"></p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-48 md:mt-64 flex flex-col items-center space-y-12">
    <div class="w-px h-16 bg-stone-100"></div>
    <div class="text-center px-6">
      <div class="pt-8">
        {%- if section.settings.cta_link != blank -%}
          <a href="{{ section.settings.cta_link }}" class="inline-block px-12 py-5 border border-stone-900 text-stone-900 text-[10px] uppercase tracking-[0.5em] font-bold hover:bg-stone-900 hover:text-white transition-all duration-700">
            {{ section.settings.cta_text }}
          </a>
        {%- else -%}
          <button class="px-12 py-5 border border-stone-900 text-stone-900 text-[10px] uppercase tracking-[0.5em] font-bold hover:bg-stone-900 hover:text-white transition-all duration-700">
            {{ section.settings.cta_text }}
          </button>
        {%- endif -%}
      </div>
    </div>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const shapesData = {
    'Round': { description: 'The timeless classic. Known for maximum brilliance and enduring elegance. The round brilliant cut is engineered for total internal reflection.', technical: '58 Facets • Ideal Brilliance' },
    'Oval': { description: 'Softly elongated and luminous. A refined shape that flatters the hand with graceful sparkle, offering a larger surface area than rounds.', technical: 'Elongated Brilliance • 57 Facets' },
    'Pear': { description: 'A distinctive teardrop silhouette. Romantic, modern, and beautifully expressive. It combines the brilliance of a round with the length of a marquise.', technical: 'Tapered Symmetry • Teardrop Cut' },
    'Marquise': { description: 'An elongated form with dramatic presence. Designed to appear larger and lengthen the finger, featuring a unique boat-shaped profile.', technical: 'Maximum Spread • Pointed Crown' },
    'Princess': { description: 'Clean, modern brilliance in a square shape. Bold lines with a contemporary edge, known for its sharp corners and geometric fire.', technical: 'Pyramidal Base • Square Profile' },
    'Emerald': { description: 'Step-cut and architectural. Celebrated for its clarity, depth, and quiet sophistication, creating a hall-of-mirrors effect.', technical: 'Step Cut • Parallel Facets' },
    'Radiant': { description: 'Brilliant and dynamic. A perfect balance of sharp structure and vibrant fire, featuring cropped corners and a crushed-ice look.', technical: 'Hybrid Cut • Cropped Corners' },
    'Asscher': { description: 'Geometric and vintage-inspired. Known for its square step-cut and timeless symmetry, reminiscent of Art Deco architecture.', technical: 'Square Step Cut • High Crown' },
    'Cushion': { description: 'Soft corners with a classic glow. A romantic shape blending tradition and brilliance, often referred to as a pillow cut.', technical: 'Rounded Square • Antique Appeal' },
    'Heart': { description: 'A rare symbol of devotion. Playful, sentimental, and unmistakably personal, requiring expert craftsmanship for perfect symmetry.', technical: 'Symmetrical Cleft • Brilliant Facets' }
  };

  const shapeCards = document.querySelectorAll('[data-shape-card]');
  const modal = document.getElementById('shape-modal');
  const modalOverlay = document.getElementById('shape-modal-overlay');
  const modalClose = document.getElementById('shape-modal-close');
  const modalName = document.getElementById('shape-modal-name');
  const modalDescription = document.getElementById('shape-modal-description');
  const modalTechnical = document.getElementById('shape-modal-technical');

  function openModal(shapeName) {
    const data = shapesData[shapeName];
    if (data && modal) {
      modalName.textContent = shapeName;
      modalDescription.textContent = data.description;
      modalTechnical.textContent = data.technical;
      modal.classList.remove('hidden');
      modal.classList.add('flex');
      document.body.style.overflow = 'hidden';
    }
  }

  function closeModal() {
    if (modal) {
      modal.classList.add('hidden');
      modal.classList.remove('flex');
      document.body.style.overflow = '';
    }
  }

  shapeCards.forEach(card => {
    card.addEventListener('click', function() {
      openModal(this.getAttribute('data-shape-card'));
    });
  });

  if (modalClose) modalClose.addEventListener('click', closeModal);
  if (modalOverlay) modalOverlay.addEventListener('click', closeModal);
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') closeModal();
  });
});
</script>

{% schema %}
{
  "name": "Diamond Shapes",
  "tag": "section",
  "class": "orea-diamond-shapes",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "Diamond Shapes"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Each silhouette offers a unique presence.\nSelect a shape to explore its character and brilliance."
    },
    {
      "type": "text",
      "id": "shapes_note",
      "label": "Shapes Note",
      "default": "Above are the standard shapes that we typically work with."
    },
    {
      "type": "text",
      "id": "shapes_tagline",
      "label": "Shapes Tagline",
      "default": "There is no right or wrong - only the shape that reflects your vision."
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "CTA Button Text",
      "default": "For bespoke guidance, we're always here."
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "CTA Button Link"
    }
  ],
  "presets": [
    {
      "name": "Diamond Shapes"
    }
  ]
}
{% endschema %}
